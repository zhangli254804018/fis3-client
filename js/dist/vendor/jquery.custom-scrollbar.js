(function(i){i.fn.customScrollbar=function(t,e){defaultOptions={hScroll:true,vScroll:true,updateOnWindowResize:false};Scrollable=function(t,e){this.init=function(i,t){this.$element=i;this.options=t;this.$element.addClass("scrollable");this.addSkinClass();this.addScrollBarComponents();if(this.options.vScroll)this.vScrollbar=new Scrollbar(this,new VSizing);if(this.options.hScroll)this.hScrollbar=new Scrollbar(this,new HSizing);this.$element.data("scrollable",this);if(window.jQueryCustomScrollbars==undefined)window.jQueryCustomScrollbars=[];this.addToScrollbarsHierarchy();this.initKeyboardScrolling()};this.addSkinClass=function(){if(typeof this.options.skin=="string")this.$element.addClass(this.options.skin)};this.addScrollBarComponents=function(){this.assignViewPort();if(this.$viewPort.length==0){this.$element.wrapInner('<div class="viewport" />');this.assignViewPort()}this.assignOverview();if(this.$overview.length==0){this.$viewPort.wrapInner('<div class="overview" />');this.assignOverview()}this.addScrollBar("vertical","prepend");this.addScrollBar("horizontal","append")};this.assignViewPort=function(){this.$viewPort=this.$element.find(".viewport")};this.assignOverview=function(){this.$overview=this.$viewPort.find(".overview")};this.addScrollBar=function(i,t){if(this.$element.find(".scroll-bar."+i).length==0)this.$element[t]("<div class='scroll-bar "+i+"'><div class='thumb'></div></div>")};this.resize=function(){if(this.vScrollbar)this.vScrollbar.resize();if(this.hScrollbar)this.hScrollbar.resize()};this.scrollTo=function(t){if(this.vScrollbar)this.vScrollbar.scrollToElement(t);if(this.hScrollbar)this.hScrollbar.scrollToElement(t);var e=i(t)};this.scrollToXY=function(i,t){this.scrollToX(i);this.scrollToY(t)};this.scrollToX=function(i){if(this.hScrollbar)this.hScrollbar.scrollTo(i)};this.scrollToY=function(i){if(this.vScrollbar)this.vScrollbar.scrollTo(i)};this.isInside=function(t,e){var s=i(t);var o=i(e);var l=s.offset();var n=o.offset();return l.top>=n.top&&l.left>=n.left&&l.top+s.height()<=n.top+o.height()&&l.left+s.width()<=n.left+o.width()};this.addNested=function(i){if(this.addNestedToOneFromList(this.nestedScrollbars,i))return true;else if(this.isInside(i.$viewPort,this.$overview)){this.nestedScrollbars.push(i);return true}else return false};this.addToScrollbarsHierarchy=function(){this.nestedScrollbars=[];if(!this.addNestedToOneFromList(this,window.jQueryCustomScrollbars))window.jQueryCustomScrollbars.push(this)};this.addNestedToOneFromList=function(i,t){for(var e=0;e<t.length;e++){if(t[e].addNested(i))return true;else if(i.addNested(t[e])){t[e]=i;return true}}return false};this.isMouseOver=function(){for(var i=0;i<this.nestedScrollbars.length;i++)if(this.nestedScrollbars[i].isMouseOver())return false;var t=this.$element.offset();var e=this.$element.width();var s=this.$element.height();return this.lastMouseEvent&&this.lastMouseEvent.pageX>=t.left&&this.lastMouseEvent.pageX<=t.left+e&&this.lastMouseEvent.pageY>=t.top&&this.lastMouseEvent.pageY<=t.top+s};this.initKeyboardScrolling=function(){var t=this;i(document).keydown(function(i){if(t.isMouseOver()){if(t.vScrollbar)t.vScrollbar.keyScroll(i);if(t.hScrollbar)t.hScrollbar.keyScroll(i)}});i(document).mousemove(function(i){t.lastMouseEvent=i})};this.init(t,e)};Scrollbar=function(t,e){this.init=function(i,t){this.scrollable=i;this.sizing=t;this.$scrollBar=this.sizing.scrollBar(this.scrollable.$element);this.$thumb=this.$scrollBar.find(".thumb");this.setScrollPosition(0,0);this.resize();this.initMouseMoveScrolling();this.initMouseWheelScrolling();this.initTouchScrolling();this.initMouseClickScrolling();this.initWindowResize()};this.resize=function(){this.scrollable.$viewPort.height(this.scrollable.$element.height());this.sizing.size(this.scrollable.$viewPort,this.sizing.size(this.scrollable.$element));this.viewPortSize=this.sizing.size(this.scrollable.$viewPort);this.overviewSize=this.sizing.size(this.scrollable.$overview);this.ratio=this.viewPortSize/this.overviewSize;this.sizing.size(this.$scrollBar,this.viewPortSize);this.thumbSize=Math.round(this.ratio*this.viewPortSize);this.sizing.size(this.$thumb,this.thumbSize);this.maxThumbPosition=this.calculateMaxThumbPosition();this.maxOverviewPosition=this.calculateMaxOverviewPosition();this.enabled=this.overviewSize>this.viewPortSize;if(this.scrollPercent===undefined)this.scrollPercent=0;if(this.enabled)this.rescroll();else this.setScrollPosition(0,0);this.$scrollBar.toggle(this.enabled)};this.initMouseMoveScrolling=function(){var t=this;this.$thumb.mousedown(function(i){if(t.enabled)t.startMouseMoveScrolling(i)});i(document).mouseup(function(i){t.stopMouseMoveScrolling(i)});i(document).mousemove(function(i){t.mouseMoveScroll(i)});this.$thumb.click(function(i){i.stopPropagation()})};this.initMouseWheelScrolling=function(){var i=this;this.scrollable.$element.mousewheel(function(t,e,s,o){if(i.enabled){i.mouseWheelScroll(s,o);t.preventDefault();t.stopPropagation()}})};this.initTouchScrolling=function(){if(document.addEventListener){var i=this;this.scrollable.$element[0].addEventListener("touchstart",function(t){if(i.enabled)i.startTouchScrolling(t)});document.addEventListener("touchmove",function(t){i.touchScroll(t)});this.scrollable.$element[0].addEventListener("touchend",function(t){i.stopTouchScrolling(t)})}};this.initMouseClickScrolling=function(){var i=this;this.$scrollBar.click(function(t){i.mouseClickScroll(t)})};this.initWindowResize=function(){if(this.scrollable.options.updateOnWindowResize){var t=this;i(window).resize(function(){t.resize()})}};this.isKeyScrolling=function(i){return this.keyScrollDelta(i)!=null};this.keyScrollDelta=function(i){for(var t in this.sizing.scrollingKeys)if(t==i)return this.sizing.scrollingKeys[i](this.viewPortSize);return null};this.startMouseMoveScrolling=function(t){this.mouseMoveScrolling=true;i("html").addClass("not-selectable");this.setUnselectable(i("html"),"on");this.setScrollEvent(t)};this.stopMouseMoveScrolling=function(t){this.mouseMoveScrolling=false;i("html").removeClass("not-selectable");this.setUnselectable(i("html"),null)};this.setUnselectable=function(i,t){if(i.attr("unselectable")!=t){i.attr("unselectable",t);i.find(":not(input)").attr("unselectable",t)}};this.mouseMoveScroll=function(i){if(this.mouseMoveScrolling)this.moveScroll(i,1)};this.moveScroll=function(i,t){var e=this.sizing.mouseDelta(this.scrollEvent,i)*t;this.scrollBy(Math.round(e*this.overviewSize/this.viewPortSize));this.setScrollEvent(i)};this.startTouchScrolling=function(i){if(i.touches&&i.touches.length>0){this.setScrollEvent(i.touches[0]);this.touchScrolling=true}};this.touchScroll=function(i){if(this.touchScrolling&&i.touches&&i.touches.length>0){this.moveScroll(i.touches[0],-1);i.preventDefault()}};this.stopTouchScrolling=function(i){this.touchScrolling=false};this.mouseWheelScroll=function(i,t){var e=this.sizing.wheelDelta(i,t)*-20;if(e!=0)this.scrollBy(e)};this.mouseClickScroll=function(i){var t=this.viewPortSize-20;if(i["page"+this.sizing.scrollAxis()]<this.$thumb.offset()[this.sizing.offsetComponent()])// mouse click over thumb
t=-t;this.scrollBy(t)};this.keyScroll=function(i){var t=i.which;if(this.enabled&&this.isKeyScrolling(t)){this.scrollBy(this.keyScrollDelta(t));i.preventDefault()}};this.scrollBy=function(i){var t=-this.scrollable.$overview.position()[this.sizing.offsetComponent()];t+=i;this.scrollTo(t)};this.scrollTo=function(i){if(i<0)i=0;if(i>this.maxOverviewPosition)i=this.maxOverviewPosition;this.scrollPercent=i/this.maxOverviewPosition;var t=this.scrollPercent*this.maxThumbPosition;this.setScrollPosition(i,t)};this.rescroll=function(){var i=this.scrollPercent*this.maxThumbPosition;var t=this.scrollPercent*this.maxOverviewPosition;this.setScrollPosition(t,i)};this.setScrollPosition=function(i,t){this.$thumb.css(this.sizing.offsetComponent(),t+"px");this.scrollable.$overview.css(this.sizing.offsetComponent(),-i+"px")};this.calculateMaxThumbPosition=function(){return this.sizing.size(this.$scrollBar)-this.thumbSize};this.calculateMaxOverviewPosition=function(){return this.sizing.size(this.scrollable.$overview)-this.sizing.size(this.scrollable.$viewPort)};this.setScrollEvent=function(i){var t="page"+this.sizing.scrollAxis();if(!this.scrollEvent||this.scrollEvent[t]!=i[t])this.scrollEvent={pageX:i.pageX,pageY:i.pageY}};this.scrollToElement=function(i){var t=i;if(this.sizing.isInside(t,this.scrollable.$overview)&&!this.sizing.isInside(t,this.scrollable.$viewPort)){var e=t.offset();var s=this.scrollable.$overview.offset();var o=this.scrollable.$viewPort.offset();var l;if(e[this.sizing.offsetComponent()]<o[this.sizing.offsetComponent()])l=e[this.sizing.offsetComponent()]-s[this.sizing.offsetComponent()];else l=e[this.sizing.offsetComponent()]-s[this.sizing.offsetComponent()]+this.sizing.size(t)-this.sizing.size(this.scrollable.$viewPort);this.scrollTo(l)}};this.init(t,e)};HSizing=function(){this.size=function(i,t){if(t)return i.width(t);else return i.width()};this.scrollBar=function(i){return i.find(".scroll-bar.horizontal")};this.mouseDelta=function(i,t){return t.pageX-i.pageX};this.offsetComponent=function(){return"left"};this.wheelDelta=function(i,t){return i};this.scrollAxis=function(){return"X"};this.scrollingKeys={37:function(i){return-10},39:function(i){return 10}};this.isInside=function(t,e){var s=i(t);var o=i(e);var l=s.offset();var n=o.offset();return l.left>=n.left&&l.left+s.width()<=n.left+o.width()}};VSizing=function(){this.size=function(i,t){if(t)return i.height(t);else return i.height()};this.scrollBar=function(i){return i.find(".scroll-bar.vertical")};this.mouseDelta=function(i,t){return t.pageY-i.pageY};this.offsetComponent=function(){return"top"};this.wheelDelta=function(i,t){return t};this.scrollAxis=function(){return"Y"};this.scrollingKeys={38:function(i){return-10},40:function(i){return 10},33:function(i){return-(i-20)},34:function(i){return i-20}};this.isInside=function(t,e){var s=i(t);var o=i(e);var l=s.offset();var n=o.offset();return l.top>=n.top&&l.top+s.height()<=n.top+o.height()}};return this.each(function(){if(t==undefined)t=defaultOptions;if(typeof t=="string"){var s=i(this).data("scrollable");if(s)s[t](e)}else if(typeof t=="object"){t=i.extend(defaultOptions,t);new Scrollable(i(this),t)}else throw"Invalid type of options"})}})(jQuery);(function(i){var t=["DOMMouseScroll","mousewheel"];if(i.event.fixHooks){for(var e=t.length;e;){i.event.fixHooks[t[--e]]=i.event.mouseHooks}}i.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var i=t.length;i;){this.addEventListener(t[--i],s,false)}}else{this.onmousewheel=s}},teardown:function(){if(this.removeEventListener){for(var i=t.length;i;){this.removeEventListener(t[--i],s,false)}}else{this.onmousewheel=null}}};i.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function s(t){var e=t||window.event,s=[].slice.call(arguments,1),o=0,l=true,n=0,r=0;t=i.event.fix(e);t.type="mousewheel";// Old school scrollwheel delta
if(e.wheelDelta){o=e.wheelDelta/120}if(e.detail){o=-e.detail/3}// New school multidimensional scroll (touchpads) deltas
r=o;// Gecko
if(e.axis!==undefined&&e.axis===e.HORIZONTAL_AXIS){r=0;n=-1*o}// Webkit
if(e.wheelDeltaY!==undefined){r=e.wheelDeltaY/120}if(e.wheelDeltaX!==undefined){n=-1*e.wheelDeltaX/120}// Add event and delta to the front of the arguments
s.unshift(t,o,n,r);return(i.event.dispatch||i.event.handle).apply(this,s)}})(jQuery);